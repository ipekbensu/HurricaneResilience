<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        * {
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            box-sizing: border-box;
        }
        .column{
            float: left;
            width: 50%;
        }
        .row:after{
            content: "";
            display: table;
            clear: both;
        }
    </style>
    <!-- data -->
    <script src="./data.js"></script>
    <script src="./dataNatural.js"></script>
    <script src="./dataBuilt.js"></script>
    <script src="./dataSocial.js"></script>
    <!-- functions -->
    <script src="./functions.js"></script>
    <script src="./run.js"></script>
    <!-- mapping -->
    <script src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyARxs_0QWBQzZ-7tnFIkcz6Tzh5Fr1I0xg"></script>
</head>
<body>
    <h2 style="text-align:center;">Hurricane Resilience</h2>
    <p style="text-align:center;">Mapping <a href="https://ipekbensu.github.io/HurricaneResilience/Vulnerability/run.html">vulnerability</a> and potential <a href="https://ipekbensu.github.io/HurricaneResilience/AmplifiedMorbidities/run.html">loss amplification</a></p>
    <br>
    <br>
    <h1 style="text-align:center;">Vulnerability</h1>
    <div class="row">
        <div class="column" style="padding-left:50px;">
            <h2>Map:</h2>
            <p>A qualitative assessment.</p>
            <div id="map1" style="width: 550px; height: 600px"></div>
        </div>
        <div class="column" style="padding-right:50px;">
            <h2>Select.</h2>
            <select id="dropdown" onchange="mark1Edit()">
                <option value="w">Vulnerability-------------------</option>
                <option value="w">Natural Hazard</option>
                <option value="w">Built Hazard</option>
                <option value="w">Social Hazard</option>
            </select>
            <h2>Method:</h2>
            <p id="met1">To comment on how susceptible an area is to high levels of post-event damage, a multitude of systems need to be considered: (1) Natural Systems, represented by potential wind and resulting windborne debris and storm surge; (2) Built Systems, characterized by the density and age of the building stock; (3) Social Systems, summarized with the Social Vulnerability Index (SoVI).</p>
            <p id="met2">While aggregating vulnerability, natural risk was assigned the highest importance factor, then built risk and then social risk. Natural systems were considered to be the main driver. The affects of the built and social systems were added as agents that amplify loss.</p>
            <a id="link"></a>
            <h2>Reference:</h2>
            <h3>Method:</h3>
            <p id="mref">NIBS, 2018. "Mitigation Saves."<br>
            DBPR, 2017. "Florida Building Code."<br>
            Sutley, 2017. "Community-Level Framework for Seismic Resilience."<br>
            HRSA, 2016. "List of Rural Counties."<br>
            Cutter, 2003. "Social Vulnerability to Environmental Hazards."</p>
            <h3 id="dref_">Data:</h3>
            <p id="dref"><a href="https://asce7hazardtool.online/">ASCE</a>.<br>
            <a href="https://hazards.atcouncil.org/">ATC</a>.<br>
            <a href="https://www.nhc.noaa.gov/nationalsurge/">NOAA</a>.<br>
            <a href="https://www.cdc.gov/nchs/data_access/urban_rural.htm">CDC</a>.</p>
        </div>
    </div>
</body>
<script>
    var map1 = []; // overall risk, each risk factor
    var mark1 = []; // affected by dropdown

    function mapsInit(){
        var options = {
            title: 'Florida',
            center: new google.maps.LatLng(27.8899385, -83.4083427),
            zoom: 6.54,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map1 = new google.maps.Map(document.getElementById('map1'), options);
    };

    function mark1Init(){
        coord.data.forEach(function(county, countyIndex){
            var scale = null;
            var risk = null;
            if(scores.data[countyIndex][5] == 1){
                scale = 2.5;
                risk = 'Low';
            }
            if(scores.data[countyIndex][5] == 2){
                scale = 5;
                risk = 'Moderate';
            }
            if(scores.data[countyIndex][5] == 3){
                scale = 7.5;
                risk = 'High';
            }
            var info = 'Vulnerability: ' + risk;
            info += '\n' + "Natural Score: " + String(scores.data[countyIndex][2]);
            info += '\n' + "Built Score: " + String(scores.data[countyIndex][3]);
            info += '\n' + "Social Score: " + String(scores.data[countyIndex][4]);
            if(scale != null){
                var marker = new google.maps.Marker({
                    title: county[0] + '\n' + info,
                    map: map1,
                    position: new google.maps.LatLng(county[2], county[3]),
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: scale,
                        strokeColor: '#FF0000',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#FF0000',
                        fillOpacity: 0.35
                    }
                });
                mark1.push(marker);
            }
        });
    };

    function mark1Edit(){ // called by dropdown
        mark1Clear();
        var selected = document.getElementById('dropdown');
        var res = selected.options[selected.selectedIndex].text;
        var scale = null;
        var risk = null;
        var info = null;
        coord.data.forEach(function(county, countyIndex){
            if(res == 'Vulnerability-------------------'){
                document.getElementById('link').innerHTML = '';
                document.getElementById('link').href = '';
                document.getElementById('met1').innerHTML = 'To comment on how susceptible an area is to high levels of post-event damage, a multitude of systems need to be considered: (1) Natural Systems, represented by potential wind and resulting windborne debris and storm surge; (2) Built Systems, characterized by the density and age of the building stock; (3) Social Systems, summarized with the Social Vulnerability Index (SoVI).';
                document.getElementById('met2').innerHTML = 'While aggregating vulnerability, natural risk was assigned the highest importance factor, then built risk and then social risk. Natural systems were considered to be the main driver. The affects of the built and social systems were added as agents that amplify loss.';
                document.getElementById('mref').innerHTML = 'NIBS, 2018. "Mitigation Saves."<br>DBPR, 2017. "Florida Building Code."<br>Sutley, 2017. "Community-Level Framework for Seismic Resilience."<br>HRSA, 2016. "List of Rural Counties."<br>Cutter, 2003. "Social Vulnerability to Environmental Hazards."';
                document.getElementById('dref_').innerHTML = 'Data:';
                document.getElementById('dref').innerHTML = '<a href="https://asce7hazardtool.online/">ASCE</a>.<br><a href="https://hazards.atcouncil.org/">ATC</a>.<br><a href="https://www.nhc.noaa.gov/nationalsurge/">NOAA</a>.<br><a href="https://www.cdc.gov/nchs/data_access/urban_rural.htm">CDC</a>.';
                if(scores.data[countyIndex][5] == 1){
                    scale = 2.5;
                    risk = 'Low';
                }
                else{
                    if(scores.data[countyIndex][5] == 2){
                        scale = 5;
                        risk = 'Moderate';
                    }
                    else{
                        if(scores.data[countyIndex][5] == 3){
                            scale = 7.5;
                            risk = 'High';
                        }
                        else{
                            scale = null;
                            risk = null;
                        }
                    }
                }
                info = 'Vulnerability: ' + risk;
                info += '\n' + "Natural Score: " + String(scores.data[countyIndex][2]);
                info += '\n' + "Built Score: " + String(scores.data[countyIndex][3]);
                info += '\n' + "Social Score: " + String(scores.data[countyIndex][4]);
            };
            if(res == 'Natural Hazard'){
                document.getElementById('link').innerHTML = 'More.';
                document.getElementById('link').href = 'https://ipekbensu.github.io/HurricaneResilience/Vulnerability/Natural/run.html';
                document.getElementById('met1').innerHTML = 'For hurricanes, the primary risk factor is wind. Secondary risk factors are windborne debris and storm surge. Areas with highest risk are usually along the coastline, where wind effects are exacerbated by high windborne debris and storm surge.';
                document.getElementById('met2').innerHTML = 'Windborne debris and storm surge were assigned lower importance factors while aggregating natural risk.';
                document.getElementById('mref').innerHTML = 'NIBS, 2018. "Mitigation Saves."<br>DBPR, 2017. "Florida Building Code."';
                document.getElementById('dref_').innerHTML = 'Data:';
                document.getElementById('dref').innerHTML = '<a href="https://asce7hazardtool.online/">ASCE</a>.<br><a href="https://hazards.atcouncil.org/">ATC</a>.<br><a href="https://www.nhc.noaa.gov/nationalsurge/">NOAA</a>.';
                if(scores.data[countyIndex][2] == 1){
                    scale = 2.5;
                    risk = 'Low';
                }
                else{
                    if(scores.data[countyIndex][2] == 2){
                        scale = 5;
                        risk = 'Moderate';
                    }
                    else{
                        if(scores.data[countyIndex][2] == 3){
                            scale = 7.5;
                            risk = 'High';
                        }
                        else{
                            scale = null;
                            risk = null;
                        }
                    }
                }
                info = 'Natural Risk: ' + risk;
            };
            if(res == 'Built Hazard'){
                document.getElementById('link').innerHTML = 'More.';
                document.getElementById('link').href = 'https://ipekbensu.github.io/HurricaneResilience/Vulnerability/Built/run.html';
                document.getElementById('met1').innerHTML = 'The primary risk factors are the density and age of the building stock. Urban areas are more susceptible to high levels of post-event damage. Moreover, older buildings are prone to greater structural damage. Areas with the highest risk are metros with older building stock.';
                document.getElementById('met2').innerHTML = 'Density and age were assigned equal importance factors while aggregating built risk.';
                document.getElementById('mref').innerHTML = 'Sutley, 2017. "Community-Level Framework for Seismic Resilience."<br>HRSA, 2016. "List of Rural Counties."';
                document.getElementById('dref_').innerHTML = 'Data:';
                document.getElementById('dref').innerHTML = '<a href="https://www.cdc.gov/nchs/data_access/urban_rural.htm">CDC</a>.<br>FEMA. HAZUS Tool.';
                if(scores.data[countyIndex][3] == 1){
                    scale = 2.5;
                    risk = 'Low';
                }
                else{
                    if(scores.data[countyIndex][3] == 2){
                        scale = 5;
                        risk = 'Moderate';
                    }
                    else{
                        if(scores.data[countyIndex][3] == 3){
                            scale = 7.5;
                            risk = 'High';
                        }
                        else{
                            scale = null;
                            risk = null;
                        }
                    }
                }
                info = 'Built Risk: ' + risk;
            };
            if(res == 'Social Hazard'){
                document.getElementById('link').innerHTML = 'More.';
                document.getElementById('link').href = 'https://ipekbensu.github.io/HurricaneResilience/Vulnerability/Social/run.html';
                document.getElementById('met1').innerHTML = 'The Social Vulnerability Index (SoVI) was used for inspection. The framework for this index includes socioeconomic and demographic information on (1) per capita income, (2) median age, (3) number of commercial establishments, (4) % employed in extractive industries, (5) % of housing units that are mobile homes, (6) % African-American, (7) % Hispanic, (8) % Native American, (9) % Asian, (10) % employed in service occupations and (11) % employed in transportation, communication and public utilies.';
                document.getElementById('met2').innerHTML = '';
                document.getElementById('mref').innerHTML = 'Cutter, 2003. "Social Vulnerability to Environmental Hazards."';
                document.getElementById('dref_').innerHTML = '';
                document.getElementById('dref').innerHTML = '';
                if(scores.data[countyIndex][4] == 1){
                    scale = 2.5;
                    risk = 'Low';
                }
                else{
                    if(scores.data[countyIndex][4] == 2){
                        scale = 5;
                        risk = 'Moderate';
                    }
                    else{
                        if(scores.data[countyIndex][4] == 3){
                            scale = 7.5;
                            risk = 'High';
                        }
                        else{
                            scale = null;
                            risk = null;
                        }
                    }
                }
                info = 'Social Risk: ' + risk;
            };
            if(scale != null){
                var marker = new google.maps.Marker({
                    title: county[0] + '\n' + info,
                    map: map1,
                    position: new google.maps.LatLng(county[2], county[3]),
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: scale,
                        strokeColor: '#FF0000',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#FF0000',
                        fillOpacity: 0.35
                    }
                });
                mark1.push(marker);
            }
        });
    };

    function mark1Clear(){
        for(var i=0; i<mark1.length; i++){
            mark1[i].setMap(null);
        }
        mark1 = [];
    };

    function viewMap(){
        google.maps.event.addDomListener(window, 'load', mapsInit);
        google.maps.event.addDomListener(window, 'load', mark1Init);
    };
    viewMap();
</script>
</html>