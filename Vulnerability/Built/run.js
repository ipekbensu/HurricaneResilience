// debugging in node
// var functions = require('./functions.js');
// var csv = require('./all-geocodes-v2016.js'); // used on line 49
// var csv2 = require('./Demographics.js');
// var csv3 = require('./BuildingCountByGeneralBuildingType.js')

var states = {
    metadata: [
        'State',
        'Abbreviation',
        'FIPS code'
    ],
    data: [
        ['Alabama', 'AL', '01'],
        ['Connecticut', 'CT', '09'],
        ['Delaware', 'DE', '10'],
        ['Florida', 'FL', '12'],
        ['Georgia', 'GA', '13'],
        ['Louisiana', 'LA', '22'],
        ['Maine', 'ME', '23'],
        ['Maryland', 'MD', '24'],
        ['Massachusetts', 'MA', '25'],
        ['Mississippi', 'MS', '28'],
        ['New Hampshire', 'NH', '33'],
        ['New Jersey', 'NJ', '34'],
        ['New York', 'NY', '36'],
        ['North Carolina', 'NC', '37'],
        ['Rhode Island', 'RI', '44'],
        ['South Carolina', 'SC', '45'],
        ['Texas', 'TX', '48'],
        ['Virginia', 'VA', '51']
    ]
};
// test
// console.log(states);
// console.log(states.data.length);

var counties = {
    metadata: {
        State: [
            'County',
            'FIPS code'
        ]
    },
    data: {}
};

states.data.forEach(function(item){
    // counties.data[item[1]] = [];
    counties.data[item[1]] = functions.readCounties(item[2], csv);
});
// test
// console.log(counties);
// console.log(counties.data.FL);
// console.log(counties.data.FL.length);

var tractsFL = {
    metadata: {
        County: [
            'Tract',
            'Population',
            '# of buildings',
            'Year built'
        ]
    },
    data: {}
};

counties.data.FL.forEach(function(item){
    // tractsFL.data[item[1]] = [];
    tractsFL.data[item[1]] = functions.readTracts(item[1], csv2, csv3);
});
// test
// console.log(tractsFL);
// console.log(tractsFL.data['12103']);

var countiesFL = {
    metadata: [
        'County',
        'FIPS code',
        'Population',
        '%-population', // plot
        '# of buildings',
        '%-# of buildings', // plot
        'Year built',
        'Decade' // plot
    ],
    data: []
};

counties.data.FL.forEach(function(item){
    // yearbuiltFL.data.push([]);
    functions.editCounties(item, tractsFL.data[item[1]], countiesFL.data);
});
// test
console.log(countiesFL);
// console.log(countiesFL.data.length);

var coordFL = {
    metadata: [
        'County',
        'FIPS code',
        'Latitude',
        'Longitude'
    ],
    data: []
};

counties.data.FL.forEach(function(item, index){
    functions.matchCoordFL(item, index, coordFL.data);
});
// test
// console.log(coordFL);