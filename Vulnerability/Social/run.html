<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        * {
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            box-sizing: border-box;
        }
        .column{
            float: left;
            width: 50%;
        }
        .row:after{
            content: "";
            display: table;
            clear: both;
        }
    </style>
    <!-- data -->
    <script src="./data.js"></script>
    <!-- functions -->
    <script src="./functions.js"></script>
    <script src="./run.js"></script>
    <!-- mapping -->
    <script src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyARxs_0QWBQzZ-7tnFIkcz6Tzh5Fr1I0xg"></script>
</head>
<body>
    <h2 style="text-align:center;">Hurricane Resilience</h2>
    <p style="text-align:center;">Mapping <a href="https://ipekbensu.github.io/HurricaneResilience/Vulnerability/run.html">vulnerability</a> and potential <a href="https://ipekbensu.github.io/HurricaneResilience/AmplifiedMorbidities/run.html">loss amplification</a></p>
    <br>
    <br>
    <h1 style="text-align:center;">Social Hazard</h1>
    <div class="row">
        <div class="column" style="padding-left:50px;">
            <h2>Map:</h2>
            <p>A qualitative assessment.</p>
            <div id="map1" style="width: 550px; height: 600px"></div>
        </div>
        <div class="column" style="padding-right:50px;">
            <h2>Method:</h2>
            <p>The Social Vulnerability Index (SoVI) was used for inspection. The framework for this index includes socioeconomic and demographic information on (1) per capita income, (2) median age, (3) number of commercial establishments, (4) % employed in extractive industries, (5) % of housing units that are mobile homes, (6) % African-American, (7) % Hispanic, (8) % Native American, (9) % Asian, (10) % employed in service occupations and (11) % employed in transportation, communication and public utilies.</p>
            <a href="https://ipekbensu.github.io/HurricaneResilience/Vulnerability/run.html">Bigger Picture.</a>
            <h2>Reference:</h2>
            <h3>Method:</h3>
            <p>Cutter, 2003. "Social Vulnerability to Environmental Hazards."</p>
        </div>
    </div>
</body>
<script>
    var map1 = []; // overall risk
    var mark1 = [];

    function mapsInit(){
        var options = {
            title: 'Florida',
            center: new google.maps.LatLng(27.8899385, -83.4083427),
            zoom: 6.54,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map1 = new google.maps.Map(document.getElementById('map1'), options);
    };

    function mark1Init(){
        coord.data.forEach(function(county, countyIndex){
            var scale = null;
            var risk = null;
            if(scores.data[countyIndex][2] == 1){
                scale = 2.5;
                risk = 'Low';
            }
            if(scores.data[countyIndex][2] == 2){
                scale = 5;
                risk = 'Moderate';
            }
            if(scores.data[countyIndex][2] == 3){
                scale = 7.5;
                risk = 'High';
            }
            var info = 'Social Risk: ' + risk;
            if(scale != null){
                var marker = new google.maps.Marker({
                    title: county[0] + '\n' + info,
                    map: map1,
                    position: new google.maps.LatLng(county[2], county[3]),
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: scale,
                        strokeColor: '#FF0000',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#FF0000',
                        fillOpacity: 0.35
                    }
                });
                mark1.push(marker);
            }
        });
    };

    function viewMap(){
        google.maps.event.addDomListener(window, 'load', mapsInit);
        google.maps.event.addDomListener(window, 'load', mark1Init);
    };
    viewMap();
</script>
</html>