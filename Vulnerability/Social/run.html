<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        * {
            box-sizing: border-box;
        }
        .column{
            float: left;
            width: 50%;
            padding: 0px;
        }
        .row:after{
            content: "";
            display: table;
            clear: both;
        }
    </style>
    <!-- data -->
    <script src="./data.js"></script>
    <!-- functions -->
    <script src="./functions.js"></script>
    <script src="./run.js"></script>
    <!-- mapping -->
    <script src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyARxs_0QWBQzZ-7tnFIkcz6Tzh5Fr1I0xg"></script>
</head>
<body>
    <!-- mapping -->
    <h1>Social Hazard</h1>
    <div class="row">
        <div class="column">
            <h2>Map:</h2>
            <p>Displays scores.</p>
            <div id="map1" style="width: 600px; height: 600px"></div>
        </div>
        <div class="column">
            <h2>Text:</h2>
            <p>Explains method.</p>
            <h2>Reference:</h2>
            <p>Edit.</p>
        </div>
    </div>
</body>
<script>
    var map1 = [];
    var mark1 = [];

    function mapsInit(){
        var options = {
            title: 'Florida',
            center: new google.maps.LatLng(27.6648, -81.5158),
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map1 = new google.maps.Map(document.getElementById('map1'), options);
    };

    function mark1Init(){
        coord.data.forEach(function(county, countyIndex){
            var scale = null;
            var risk = null;
            if(scores.data[countyIndex][2] == 1){
                scale = 1.5;
                risk = 'Low';
            }
            if(scores.data[countyIndex][2] == 2){
                scale = 3;
                risk = 'Moderate';
            }
            if(scores.data[countyIndex][2] == 3){
                scale = 4.5;
                risk = 'High';
            }
            var info = 'Social Risk: ' + risk;
            var marker = new google.maps.Marker({
                title: county[0] + '\n' + info,
                map: map1,
                position: new google.maps.LatLng(county[2], county[3]),
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    scale: scale,
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.35
                }
            });
            mark1.push(marker);
        });
    };

    function viewMap(){
        google.maps.event.addDomListener(window, 'load', mapsInit);
        google.maps.event.addDomListener(window, 'load', mark1Init);
    };
    viewMap();
</script>
</html>